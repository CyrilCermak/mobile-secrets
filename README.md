# Mobile secrets
*Handle mobile secrets the secure way with ease*

Working with this GEM is described in detail here: https://medium.com/@cyrilcermak/mobile-secrets-8458ceaf4c16

MobileSecrets comes with a simple YAML configuration. The configuration can be generated by executing `mobile-secrets --create-template`.
The configuration looks as follows:

```yaml
MobileSecrets:
  # hashKey: Key that will be used to hash the secret values.
  # For encrypting files the key needs to be 32 chars long as an AES standard.
  hashKey: "KokoBelloKokoKokoBelloKokoKokoBe"
  # shouldIncludePassword: By default the password is saved in the code as a series of bytes, however it can also
  # be fetched from your API, saved in keychain and passed to the Secrets for improving the security.
  shouldIncludePassword: true
  # language: Swift is currently only supported language, Kotlin is coming soon.
  language: "Swift"
  # Key-value dictionary for secrets. The key is then referenced in the code to get the secret.
  secrets:
    googleMaps: "123123123"
    firebase: "asdasdasd"
    amazon: "asd123asd123"
  # Optional, remove files if you do not want to encrypt them
  files:
    - tmp.txt
    - Info.plist
```

Hash key needs to be provided for obfuscating secrets or encrypting files with AES. MobileSecrets stores the key by default as an array of bytes within the bytes array of secrets.
This can be changed by setting the `shouldIncludePassword` flag to false in the configuration. Handling the key becomes then dependent on the developer. While this approach brings a better security as the key IS NOT part of the compiled binary, it comes with the downside of fetching the key. No need to say that the key must be stored securely on the device in order to de-obfuscate the secrets or decrypt the files. A generated file from this configuration can then be imported into the iOS project and used as follows:
```swift
let googleMaps = Secrets.standard.string(forKey: "googleMaps")
try? Secrets.standard.decryptFiles() // This can be executed only once as the file will stay on the drive.
```


mobile-secrets usage:<br/>
1) Create gpg first with --init-gpg "."<br/>
2) Create a template for MobileSecrets with --create-template<br/>
3) Configure MobileSecrets.yml with your hash key, secrets etc<br/>
4) Import edited template to encrypted secret.gpg with --import ./MobileSecrets.yml<br/>
5) Export secrets from secrets.gpg to source file with --export and PATH to project<br/>
6) Add exported source file to the project<br/>
7) Delete the configuration from your drive or repository as it is already stored and encrypted with GPG in the `secrets.gpg` file.
