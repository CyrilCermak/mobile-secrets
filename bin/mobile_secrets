#!/usr/bin/env ruby

require_relative '../lib/src/secrets_handler'
require 'yaml'

secrets_handler = MobileSecrets::SecretsHandler.new
cmd = ARGV[0]
argv_1 = ARGV[1]
argv_2 = ARGV[2]

if cmd == "--create-template"
  FileUtils.cp('../lib/resources/example.yml', "#{Dir.pwd}#{File::SEPARATOR}MobileSecrets.yml")
elsif cmd == "--init" then
  configuration = YAML.load_file('../lib/resources/example.yml')["MobileSecrets"]
  p configuration["hashKeys"]
  p configuration["secrets"]
end

# if ARGV.include? "--dry-run"
#   secrets_handler.dry_run "firebaseKey", "googleMapsKey", "imageRendererKey"
# elsif ARGV.include? "--obfuscate"
#   p secrets_handler.obfuscate(ARGV[1])
# elsif ARGV.include? "--deobfuscate"
#   p secrets_handler.deobfuscate(ARGV[1])
# else
#   secrets_handler.decrypt
# end
